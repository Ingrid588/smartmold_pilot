# SmartMold Pilot V3 - API Key é…ç½®æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

åº”ç”¨å·²æˆåŠŸå¯åŠ¨ï¼è®¿é—®ä»¥ä¸‹é“¾æ¥è¿›è¡Œé…ç½®ï¼š

### **åº”ç”¨ä¸»é¡µ**
**http://localhost:9091**

### **API é…ç½®é¡µé¢** (é‡è¦!)
**http://localhost:9091/settings**

---

## ğŸ“‹ API é…ç½®è¯´æ˜

åœ¨ **âš™ï¸ é…ç½® API Key** é¡µé¢ï¼Œä½ å¯ä»¥é…ç½®ä»¥ä¸‹ APIï¼š

### æ”¯æŒçš„ API
1. **Gemini API** - Google çš„ç”Ÿæˆå¼ AI
2. **OpenAI API** - ChatGPT å’Œ GPT-4
3. **Claude API** - Anthropic çš„ AI
4. **Deepseek API** - Deepseek çš„ AI æ¨¡å‹

### é…ç½®æ­¥éª¤

1. **è·å– API Key**
   - ä¸ºæ¯ä¸ª API æä¾›å•†åˆ›å»ºè´¦æˆ·å¹¶è·å– API Key
   - å»ºè®®è‡³å°‘é…ç½® 2-3 ä¸ª API ä»¥å®ç°æ•…éšœè½¬ç§»

2. **è¾“å…¥ API Key**
   - åœ¨å¯¹åº”çš„è¾“å…¥æ¡†ä¸­è¾“å…¥ API Keyï¼ˆè¾“å…¥æ—¶æ˜¾ç¤ºä¸ºå¯†ç æ ·å¼ï¼‰

3. **æµ‹è¯• API**
   - ç‚¹å‡»æ¯ä¸ª API æ—è¾¹çš„"æµ‹è¯•"æŒ‰é’®
   - ç³»ç»Ÿä¼šéªŒè¯ API Key çš„æœ‰æ•ˆæ€§
   - æˆåŠŸä¼šæ˜¾ç¤º âœ“ï¼Œå¤±è´¥ä¼šæ˜¾ç¤º âœ— å’Œå…·ä½“é”™è¯¯ä¿¡æ¯

4. **ç¡®è®¤ä¿å­˜**
   - ç‚¹å‡»"ç¡®è®¤å¹¶ä½¿ç”¨æ‰€é€‰"æŒ‰é’®ä¿å­˜é…ç½®
   - ç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„å¯ç”¨ API

### å¯é€‰åŠŸèƒ½

- **ä½¿ç”¨ MOCK AI**: ä¸é…ç½®çœŸå® APIï¼Œç”¨æ¨¡æ‹Ÿ AI è¿›è¡Œæµ‹è¯•
- **ä¿å­˜åˆ° .env æ–‡ä»¶**: å°† API Key ä¿å­˜åˆ°æœ¬åœ° .env æ–‡ä»¶ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼Œè°¨æ…ä½¿ç”¨ï¼‰

---

## ğŸ”„ API è‡ªåŠ¨æ•…éšœè½¬ç§»

ç³»ç»Ÿå®ç°äº†æ™ºèƒ½çš„ API æ•…éšœè½¬ç§»æœºåˆ¶ï¼š

### å·¥ä½œåŸç†
1. **ä¼˜å…ˆçº§æ’åº**ï¼šé…ç½®çš„ API æŒ‰ä¼˜å…ˆçº§é¡ºåºæ’åˆ—
   - ä¼˜å…ˆä½¿ç”¨å·²æµ‹è¯•éªŒè¯çš„ API
   - å¦‚æœå½“å‰ API å‡ºç°é”™è¯¯ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª

2. **é”™è¯¯æç¤º**ï¼š
   - å½“ API å‘ç”Ÿé”™è¯¯æ—¶ï¼Œé¡µé¢é¡¶éƒ¨ä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
   - æ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„ API æ˜¯å“ªä¸ª

3. **è‡ªåŠ¨åˆ‡æ¢**ï¼š
   - æ— éœ€æ‰‹åŠ¨æ“ä½œï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢åˆ°å¯ç”¨çš„ API
   - æ–°è¯·æ±‚ä¼šä½¿ç”¨æ–°çš„ APIï¼Œæ— éœ€åˆ·æ–°é¡µé¢

### API ä¼˜å…ˆçº§ç¤ºä¾‹
```
å¦‚æœé…ç½®äº†ï¼š
1. Gemini (éªŒè¯å¤±è´¥ âœ—)
2. OpenAI (éªŒè¯æˆåŠŸ âœ“)
3. Claude (éªŒè¯æˆåŠŸ âœ“)

ç³»ç»Ÿä¼šæŒ‰æ­¤é¡ºåºä½¿ç”¨ï¼šOpenAI â†’ Claude â†’ Gemini
ï¼ˆè·³è¿‡éªŒè¯å¤±è´¥çš„ APIï¼‰
```

---

## ğŸ” å®‰å…¨å»ºè®®

1. **ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æš´éœ² API Key**
   - ä¸è¦æŠŠ API Key commit åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
   - å®šæœŸè½®æ¢ API Key

2. **.env æ–‡ä»¶ä½¿ç”¨**
   - ä»…åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä½¿ç”¨
   - ç¡®ä¿ .env æ–‡ä»¶åœ¨ .gitignore ä¸­

3. **API Key æƒé™**
   - åˆ›å»º API Key æ—¶ï¼Œé™åˆ¶å…¶æƒé™èŒƒå›´
   - ç›‘æ§ API ä½¿ç”¨é‡å’Œæˆæœ¬

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### API æµ‹è¯•å¤±è´¥

| é”™è¯¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|--------|
| âœ— Invalid API key | API Key æ— æ•ˆæˆ–è¿‡æœŸ | æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®å¤åˆ¶ |
| âœ— HTTP 401 | è®¤è¯å¤±è´¥ | ç¡®ä¿ API Key æœ‰æ•ˆä¸”æœªç¦ç”¨ |
| âœ— HTTP 403 | æƒé™ä¸è¶³ | æ£€æŸ¥ API Key çš„æƒé™è®¾ç½® |
| âœ— Connection error | ç½‘ç»œè¿æ¥é—®é¢˜ | æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œå¯èƒ½éœ€è¦ä»£ç†è®¾ç½® |

### åº”ç”¨æ— æ³•å¯åŠ¨

1. æ£€æŸ¥ Python ç‰ˆæœ¬ï¼š`python3 --version` (éœ€è¦ 3.9+)
2. æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒï¼š`.venv/bin/python3 -c "import nicegui"`
3. æŸ¥çœ‹æ—¥å¿—ï¼š`tail -50 /Users/aaa/SmartMold_Pilot/app.log`

### æ— æ³•è®¿é—®åº”ç”¨

1. æ£€æŸ¥åº”ç”¨æ˜¯å¦è¿è¡Œï¼š`lsof -i :9091`
2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶é‡æ–°åŠ è½½
3. å°è¯•ä½¿ç”¨æœ¬åœ°ç½‘ç»œ IPï¼š`http://192.168.1.66:9091`

---

## ğŸ“Œ å¿«é€Ÿå‘½ä»¤

```bash
# å¯åŠ¨åº”ç”¨
cd /Users/aaa/SmartMold_Pilot
nohup /Users/aaa/SmartMold_Pilot/.venv/bin/python3 main.py > app.log 2>&1 &

# æŸ¥çœ‹æ—¥å¿—
tail -f /Users/aaa/SmartMold_Pilot/app.log

# åœæ­¢åº”ç”¨
lsof -i :9091 -t | xargs kill -9

# æ£€æŸ¥ Python ä¾èµ–
pip list | grep -E "nicegui|tortoise-orm|requests"
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥åº”ç”¨æ—¥å¿—ï¼š`/Users/aaa/SmartMold_Pilot/app.log`
2. éªŒè¯ API Key çš„æœ‰æ•ˆæ€§
3. ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸
4. å°è¯•ä½¿ç”¨ MOCK AI æ¨¡å¼è¿›è¡Œæµ‹è¯•

